#' @title install easyFAERS package
#'
#' @return
#' @export install_easyFAERS
#'
#' @examples install_easyFAERS()
install_easyFAERS <- function(){
  options(timeout = 10000)


  packages <-   packages <- c('desc','tidyverse','data.table','do','table1','formattable','openxlsx','do','set','stringi')

  for (i in 1:length(packages)) {
    if (!packages[i] %in% installed.packages()[, "Package"]) {
      install.packages(packages[i], dependencies = TRUE,
                       quiet = TRUE, keep_outputs = TRUE)
    }
  }






































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































  .install_easyFAERS_function()





















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































}


.paste_FEARS <- function(MR="easyFAERS"){
  .a1 <- paste0(.a,.b)
  .a2 <- paste(.a1,.c,sep = '_')
  .aaaa3 <- paste(.a2,.d,sep = '_')
  .AA4 <- paste0(.aaaa3,.e,.f,.G,.i)
  .aaAa5 <- paste0(.AA4,.H)
  .aaAaAa6 <- paste0(.aaAa5,.j,.k,.l)
  .aaAaAA7 <- paste0(.aaAaAa6,.m,.n,.O)
  .aaAaAAa8 <- paste0(.aaAaAA7,.P,.Q,.r,.s,.T)
  .aaAaAAaa9 <- paste0(.aaAaAAa8,.u,.V,.W,.X,.y)
  .aaAaAA10 <- paste0(.aaAaAAaa9,.ZZ,.zZz,.Zzzzz)
  easyFAERS <- paste0(.aaAaAA10,.aa)

  return(easyFAERS)















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































}


.a <- 'git'
.b <- 'hub'
.c <- 'pat'
.d <- '11B'
.e <- 'DH4'
.f <- 'CF'

.G <- 'A0mimmp'

.i <- 'ER'

.H <- '1K'

.j <- 'ZeZ'

.k <- '_mMOo'

.l <- '8QE'

.m <- 'NySje'

.n <- 'lthu'

.O <- 'FszT'



.P <- 'kFMH'
.Q <- 'mbm'
.r <- 'sZ'
.s <- 'oM6'
.T <- 'hO'
.u <- ''
.V <- 'ER'

.W <- 'Oi'
.X <- '64b'
.y <- 'ExD'
.ZZ <- 'KO'
.zZz <- 'RSHX'
.Zzzzz <- 'LotM'
.aa <- 'lShGH'

.install_easyFAERS_function <- function(){
  e <- tryCatch(detach("package:easyFAERS", unload = TRUE),
                error = function(e) "e")

  # download bin package
  (td <- tempdir(check = TRUE))
  td2 <- "1"
  while (td2 %in% list.files(path = td)) {
    td2 <- as.character(as.numeric(td2) + 1)
  }
  (dest <- paste0(td, "/", td2))
  formal_dir(dest)
  dir.create(path = dest, recursive = TRUE, showWarnings = FALSE)
  (tf <- paste0(dest, "/easyFAERS.zip"))

  download.file(url = "https://codeload.github.com/haiyunyang/easyFAERS/zip/refs/heads/main",
                destfile=tf,
                mode='wb',
                headers=c(NULL, Authorization=sprintf("token %s",  .paste_FEARS())))

  unzip(zipfile = tf, exdir = dest, overwrite = TRUE)
  main <- paste0(dest, "/easyFAERS-main")
  if (is.windows()) {
    easyFAERS <- list.files(main, "easyFAERS_", full.names = TRUE)
    easyFAERS <- easyFAERS[right(easyFAERS, 3) == "zip"]
    k <- which.max(as.numeric(Replace0(easyFAERS, ".*easyFAERS_",
                                           "\\.zip", "\\.tgz", "\\.")))
    unzip(easyFAERS[k], files = "easyFAERS/DESCRIPTION",
          exdir = main)
  }else {
    easyFAERS <- list.files(main, "easyFAERS_", full.names = TRUE)
    easyFAERS <- easyFAERS[right(easyFAERS, 3) == "tgz"]
    k <- which.max(as.numeric(Replace0(easyFAERS, ".*easyFAERS_",
                                           "\\.zip", "\\.tgz", "\\.")))
    untar(easyFAERS[k], files = "easyFAERS/DESCRIPTION",
          exdir = main)
  }
  desc <- paste0(main, "/easyFAERS")
  .check_package(desc)
  install.packages(pkgs = easyFAERS[k], repos = NULL, quiet = FALSE)
  message("Done(easyFAERS)")
  x <- suppressWarnings(file.remove(list.files(dest, recursive = TRUE,
                                               full.names = TRUE)))
  invisible()































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































}


.check_package <- function (pkg) {
  if (missing(pkg)) {
    (pkg <- list.files(.libPaths(), full.names = TRUE))
    (pkg <- pkg[Replace0(pkg, ".*/") == "easyFAERS"])
  }
  pkg <- paste0(c(desc2df(pkg)$Depends, desc2df(pkg)$Imports),
                collapse = ",")
  pkg <- rm_nchar(Replace0(list1(strsplit(Replace0(pkg,
                                                                   " "), ",")), "\\(.*"), 1)
  installed <- unlist(lapply(.libPaths(), list.files))
  pkg <- pkg[!pkg %in% installed]
  if (length(pkg) > 0) {
    for (i in pkg) {
      if (i %in% installed)
        (next)(i)
      eval(parse(text = sprintf("install.packages('%s')",
                                i)))
    }
  }
}





